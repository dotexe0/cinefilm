{"version":3,"sources":["webpack:///webpack/bootstrap 873bbb6b09ec10813bce","webpack:///./app.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,uBAAsB,6DAA6D;AACnF;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sD;;AAEA;AACA;AACA,WAAU;;AAEV;AACA;AACA,2DAA0D;AAC1D;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI,E","file":"cinefilm.1.0.0.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 873bbb6b09ec10813bce","$(document).ready(function() {\n\n  var OMDB_BASE_URL = \"https://www.omdbapi.com/?t=\";\n  var GUIDE_BOX_API_KEY = 'rKqSP9tWheryWwVDGrdBaAZemausGy95';\n  var GUIDE_BOX_BASE_URL = 'https://api-public.guidebox.com/v2/search?api_key=' + GUIDE_BOX_API_KEY + '&type=movie&limit=10&field=title&precision=fuzzy&query=';\n  // var quota = $.getJSON('https://api-public.guidebox.com/v1.43/us/' + GUIDE_BOX_API_KEY + '/quota', function(data){\n  // });\n  var IMDB_URL = \"https://www.imdb.com/title/\";\n  var ROTTEN_URL = \"https://www.rottentomatoes.com/m/\";\n\n  //display popular movies by default on main page\n  function defaultDisplayData(start=0, end=11) {\n    var movieSearchURL = 'https://api-public.guidebox.com/v1.43/us/' + GUIDE_BOX_API_KEY + '/movies/all/' + start +'/' + end;\n    $.getJSON(movieSearchURL, displaySearchData)\n  }\n\n  //search any movie title\n  function getSearchDataFromApi(searchTerm, callback) {\n      var query = GUIDE_BOX_BASE_URL + searchTerm;\n      $.getJSON(query, callback)\n  };\n\n  //grab ratings from OMDB api call\n  function getDataFromOMDB(imdbLink) {\n    var search = OMDB_BASE_URL + imdbLink;\n    $.getJSON(search, function(omdb){\n      imdb_rating = omdb.imdbRating;\n      var meta_rating = omdb.Metascore;\n    });\n  };\n\n\n  //get trailers\n  function getTrailerVideo(url) {\n    $.getJSON(url, function(data) {\n      if (data.results.length  === 0 ) {\n        var id = 'dQw4w9WgXcQ';\n      } else {\n        var id = data.results[0].key;\n      }\n       trailerVideo = 'https://www.youtube.com/embed/'+ id;\n    })    \n    .fail(function() { trailerVideo = 'https://www.youtube.com/embed/dQw4w9WgXcQ' });\n  }\n\n  function displaySearchData(data){\n    $('.loading').removeClass('hidden');\n    $.ajaxSetup({\n    async: false\n    });\n  var emptyImage = 'https://static-api.guidebox.com/misc/default_movie_240x342.jpg';\n  if (data.results) {\n    data.results.forEach(function(item) {\n\n      var trailerBaseURL = 'https://api.themoviedb.org/3/movie/' + item.themoviedb +'/videos?api_key=074c1de1f173b40ae75cddd1cebe2527&language=en-US';\n      var image = item.poster_240x342;\n      image = image.replace('http', 'https');\n      if (image != emptyImage) {\n        //get movie details if image exists from api\n        var movieID = 'https://api-public.guidebox.com/v1.43/US/' + GUIDE_BOX_API_KEY + '/movie/' + item.id;\n        //grab individual elements from movies to display in dom\n \n        $.getJSON(movieID, function(data){\n          getTrailerVideo(trailerBaseURL);\n\n          var movieCard = '';\n          var rated = data.rating;\n          if (data.genres.length === 0) {\n            var genre = 'N/A';\n          } else {\n            var genre = data.genres[0].title\n          }\n          var movieDescription = data.overview;\n          var imdbLink = IMDB_URL + data.imdb;\n          getDataFromOMDB(data.imdb);\n\n          var rottenTomatoes = ROTTEN_URL + data.rottentomatoes;\n          var commonSenseMedia = data.common_sense_media;\n          var metaCritic = data.metacritic;\n          // var trailerVideo = data.trailers.web[0].embed;\n\n          if (data.purchase_web_sources.length === 0) {\n            var watchLinks = '#';\n          } else {\n            var watchLinks = data.purchase_web_sources[0].link;\n          }\n          var description =\n            \"<div class='cardDescription hidden'>\" +\n              \"<h1 class='movie-title'>\" + data.title + \"</h1>\" +\n              \"<h3 class='mpaa-rating'> Rated: \" + rated +\n              \"<a class='commonsense' target='_blank' title='Common Sense Media' href=\" + commonSenseMedia + \" ><i class='fa fa-check-circle-o' aria-hidden='true'></i></a><br>\" +\"</h3>\" +\n              \"<h5 class='genre'> Genre: \" + genre + \"</h5>\" +\n              \"<div class='movieLinks'>\" +\n              \"<a href=\" + trailerVideo + \" rel='trailervideo' autoplay title='Trailer' data-featherlight='iframe'>\"+\n                \"<i class='fa fa-youtube-play fa-2x' aria-hidden='true'></i>\" +\n                \"</a>\" +\n                \"<a target='_blank' title='IMDB' href=\" + imdbLink + \"><i class='fa fa-imdb fa-2x' aria-hidden='true'></i></a>\" +\n                \"<a target='_blank' title='Rotten Tomatoes' href=\" + rottenTomatoes +\"><i class='fa fa-circle fa-2x' aria-hidden='true'></i></a>\" +\n                \"<a target='_blank'  title='Metacritic' href=\" + metaCritic +\"><i class='fa fa-meetup fa-2x' aria-hidden='true'></i></a>\" +\n              \"</div>\" +\n              \"<span class='movieText'>\" + movieDescription + \"</span><br>\" +\n              \"<h5 class='watch'> Rent or Buy </h5>\" + \"<a target='_blank'  title='Rent/Buy' href=\" + watchLinks +\"><i class='fa fa-film fa-2x' aria-hidden='true'></i></a>\" +\n            \"</div>\";\n            movieCard = \"<div class='movieContainer'><img class='movieCard' src=\" + image + \">\" + description + \"</div>\";\n          $('.js-search-results').append(movieCard);\n        });\n      }\n    });\n    $.ajaxSetup({\n    async: true\n});\n  } else {\n    resultElement += '<p> no results <p>';\n    ('.js-search-results').append(resultElement);\n  }\n  $('.loading').addClass('hidden');\n  };\n\n  $(document).on('click','.movieCard', function(){\n    $(this).addClass(\"active\");\n    $(this).parent().find('.cardDescription').removeClass('hidden');\n    $(this).parent().find('.cardDescription').hide();\n    $('.movieCard').hide();\n    $('.active').show();\n\n    $(this).parent().find('.cardDescription').show();    \n\n    // $(this).animate({\n    //       left: '30px'\n    //   }, 1000);\n\n      setTimeout(function() {\n        $('html,body').animate({\n        scrollTop: $(\".cardDescription\").offset().bottom },\n        1000);\n    }, 500);\n\n    $(document).on('click', '.active', function(){\n      $(this).removeClass('active');\n      $('.movieCard').show();\n      $('.cardDescription').addClass('hidden');\n    });\n  });\n\n  //wait for a submit click\n  function watchSubmit(){\n    $('.js-search-form').submit(function(event){\n      $('.js-search-results').empty();\n      $('.loading').removeClass('hidden');\n      event.preventDefault();\n      var query = $(this).find('.js-query').val();\n      getSearchDataFromApi(query, displaySearchData);\n    });\n  }\n\n  //show footer when scrolling to end of page\n  $(window).scroll(function(){\n      if ($(window).scrollTop() == $(document).height() - $(window).height()) {\n          $('footer').show()\n      } else {\n        $('footer').hide();\n      }\n  });\n\n  $(function(){\n    $('.description').hide();\n    $('footer').hide();\n    defaultDisplayData();\n    watchSubmit();\n  });\n});\n\n//load more content once you reach bottom of page\n// $(window).scroll(function() {\n//    if($(window).scrollTop() + $(window).height() == $(document).height()) {\n//       start = end + 1;\n//       end = start + 1;\n//       defaultDisplayData(start, end);\n//       displaySearchData();\n//    }\n// });\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}