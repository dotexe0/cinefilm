{"version":3,"sources":["webpack:///webpack/bootstrap 81afd922dcfa812baeab","webpack:///./app.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA,uFAAsF,qBAAqB,wBAAwB,MAAM,6BAA6B;AACtK;AACA;AACA,OAAM;AACN;AACA;;AAEA;AACA;AACA,8EAA6E,qBAAqB;AAClG;AACA;;AAEA;AACA;AACA,oEAAmE,qBAAqB,wBAAwB,WAAW;AAC3H;AACA;;AAEA;AACA;AACA,wDAAuD,GAAG,WAAW,qBAAqB;AAC1F;AACA;AACA;AACA,MAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,uBAAsB,6DAA6D;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA,oDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sD;;AAEA;AACA;AACA,2DAA0D;AAC1D;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC","file":"cinefilm.1.0.0.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 81afd922dcfa812baeab","$(document).ready(function() {\r\n\r\n  let OMDB_BASE_URL = \"https://www.omdbapi.com/?t=\";\r\n  let THE_MOVIE_DB_API_KEY = '074c1de1f173b40ae75cddd1cebe2527';\r\n  // let THE_MOVIE_DB_BASE_URL = `https://api.themoviedb.org/3/search/movie?api_key=${THE_MOVIE_DB_API_KEY}&language=en-US&query=${query}&page=1&include_adult=false`;  // let GUIDE_BOX_API_KEY = 'rKqSP9tWheryWwVDGrdBaAZemausGy95';\r\n  // let GUIDE_BOX_BASE_URL = 'https://api-public.guidebox.com/v2/search?api_key=' + GUIDE_BOX_API_KEY + '&type=movie&limit=10&field=title&precision=fuzzy&query=';\r\n  // let quota = $.getJSON('https://api-public.guidebox.com/v1.43/us/' + GUIDE_BOX_API_KEY + '/quota', function(data){\r\n  // });\r\n  let IMDB_URL = \"https://www.imdb.com/title/\";\r\n  let ROTTEN_URL = \"https://www.rottentomatoes.com/m/\";\r\n\r\n  //display popular movies by default on main page\r\n  function defaultDisplayData() {\r\n    let latestMovies = `https://api.themoviedb.org/3/movie/popular?api_key=${THE_MOVIE_DB_API_KEY}&language=en-US`;\r\n    $.getJSON(latestMovies, displaySearchData);\r\n  }\r\n\r\n  //search any movie title\r\n  function getSearchDataFromApi(searchTerm, callback) {\r\n  let query = `https://api.themoviedb.org/3/search/movie?api_key=${THE_MOVIE_DB_API_KEY}&language=en-US&query=${searchTerm}&page=1&include_adult=false`\r\n      $.getJSON(query, callback);\r\n  };\r\n\r\n  //grab ratings from OMDB api call\r\n  function getMovieInfoByID(ID) {\r\n    let search = `https://api.themoviedb.org/3/movie/${ID}?api_key=${THE_MOVIE_DB_API_KEY}&language=en-US`;\r\n    $.getJSON(search, function(omdb){\r\n      imdb_rating = omdb.imdbRating;\r\n      let meta_rating = omdb.Metascore;\r\n    });\r\n  };\r\n\r\n\r\n  //get trailers\r\n  function getTrailerVideo(url) {\r\n    $.getJSON(url, function(data) {\r\n      if (data.results.length  === 0 ) {\r\n        let id = 'dQw4w9WgXcQ';\r\n      } else {\r\n        let id = data.results[0].key;\r\n      }\r\n       trailerVideo = 'https://www.youtube.com/embed/'+ id;\r\n    })    \r\n    .fail(function() { trailerVideo = 'https://www.youtube.com/embed/dQw4w9WgXcQ' });\r\n  }\r\n\r\n  function displaySearchData(data){\r\n    console.log('initial data', data);\r\n    $('.loading').removeClass('hidden');\r\n    // $.ajaxSetup({\r\n    // // async: false\r\n    // });\r\n  let emptyImage = 'https://static-api.guidebox.com/misc/default_movie_240x342.jpg';\r\n  if (data.results) {\r\n    data.results.forEach(function(movie) {\r\n      console.log('data for search results', movie)\r\n      let trailerBaseURL = 'https://api.themoviedb.org/3/movie/' + movie.themoviedb +'/videos?api_key=074c1de1f173b40ae75cddd1cebe2527&language=en-US';\r\n      let image = `http://image.tmdb.org/t/p/w200${movie.poster_path}`;\r\n      image = image.replace('http', 'https');\r\n      if (image != emptyImage) {\r\n        //get movie details if image exists from api\r\n        let movieID = movie.id;\r\n        //grab individual elements from movies to display in dom\r\n \r\n        $.getJSON(movieID, function(data){\r\n          getTrailerVideo(trailerBaseURL);\r\n\r\n          let movieCard = '';\r\n          let rated = data.rating;\r\n          if (data.genres.length === 0) {\r\n            let genre = 'N/A';\r\n          } else {\r\n            let genre = data.genres[0].title\r\n          }\r\n          let movieDescription = data.overview;\r\n          let imdbLink = IMDB_URL + data.imdb_id;\r\n          getMovieInfoByID(data.imdb);\r\n\r\n          let rottenTomatoes = ROTTEN_URL + data.rottentomatoes;\r\n          let commonSenseMedia = data.common_sense_media;\r\n          let metaCritic = data.metacritic;\r\n          // let trailerVideo = data.trailers.web[0].embed;\r\n\r\n          if (data.purchase_web_sources.length === 0) {\r\n            let watchLinks = '#';\r\n          } else {\r\n            let watchLinks = data.purchase_web_sources[0].link;\r\n          }\r\n          let description =\r\n            \"<div class='cardDescription hidden'>\" +\r\n              \"<h1 class='movie-title'>\" + data.title + \"</h1>\" +\r\n              \"<h3 class='mpaa-rating'> Rated: \" + rated +\r\n              \"<a class='commonsense' target='_blank' title='Common Sense Media' href=\" + commonSenseMedia + \" ><i class='fa fa-check-circle-o' aria-hidden='true'></i></a><br>\" +\"</h3>\" +\r\n              \"<h5 class='genre'> Genre: \" + genre + \"</h5>\" +\r\n              \"<div class='movieLinks'>\" +\r\n              \"<a href=\" + trailerVideo + \" rel='trailervideo' autoplay title='Trailer' data-featherlight='iframe'>\"+\r\n                \"<i class='fa fa-youtube-play fa-2x' aria-hidden='true'></i>\" +\r\n                \"</a>\" +\r\n                \"<a target='_blank' title='IMDB' href=\" + imdbLink + \"><i class='fa fa-imdb fa-2x' aria-hidden='true'></i></a>\" +\r\n                \"<a target='_blank' title='Rotten Tomatoes' href=\" + rottenTomatoes +\"><i class='fa fa-circle fa-2x' aria-hidden='true'></i></a>\" +\r\n                \"<a target='_blank'  title='Metacritic' href=\" + metaCritic +\"><i class='fa fa-meetup fa-2x' aria-hidden='true'></i></a>\" +\r\n              \"</div>\" +\r\n              \"<span class='movieText'>\" + movieDescription + \"</span><br>\" +\r\n              \"<h5 class='watch'> Rent or Buy </h5>\" + \"<a target='_blank'  title='Rent/Buy' href=\" + watchLinks +\"><i class='fa fa-film fa-2x' aria-hidden='true'></i></a>\" +\r\n            \"</div>\";\r\n            movieCard = \"<div class='movieContainer'><img class='movieCard' src=\" + image + \">\" + description + \"</div>\";\r\n          $('.js-search-results').append(movieCard);\r\n        });\r\n      }\r\n    });\r\n//     $.ajaxSetup({\r\n//     async: true\r\n// });\r\n  } else {\r\n    let resultElement = resultElement + '<p> no results <p>';\r\n    ('.js-search-results').append(resultElement);\r\n  }\r\n  $('.loading').addClass('hidden');\r\n  };\r\n\r\n  $(document).on('click','.movieCard', function(){\r\n    $(this).addClass(\"active\");\r\n    $(this).parent().find('.cardDescription').removeClass('hidden');\r\n    $(this).parent().find('.cardDescription').hide();\r\n    $('.movieCard').hide();\r\n    $('.active').show();\r\n\r\n    $(this).parent().find('.cardDescription').show();    \r\n\r\n      setTimeout(function() {\r\n        $('html,body').animate({\r\n        scrollTop: $(\".cardDescription\").offset().bottom },\r\n        1000);\r\n    }, 500);\r\n\r\n    $(document).on('click', '.active', function(){\r\n      $(this).removeClass('active');\r\n      $('.movieCard').show();\r\n      $('.cardDescription').addClass('hidden');\r\n    });\r\n  });\r\n\r\n  //wait for a submit click\r\n  function watchSubmit(){\r\n    $('.js-search-form').submit(function(event){\r\n      $('.js-search-results').empty();\r\n      $('.loading').removeClass('hidden');\r\n      event.preventDefault();\r\n      let query = $(this).find('.js-query').val();\r\n      getSearchDataFromApi(query, displaySearchData);\r\n    });\r\n  }\r\n\r\n  //show footer when scrolling to end of page\r\n  $(window).scroll(function(){\r\n      if ($(window).scrollTop() == $(document).height() - $(window).height()) {\r\n          $('footer').show()\r\n      } else {\r\n        $('footer').hide();\r\n      }\r\n  });\r\n\r\n  $(function(){\r\n    $('.description').hide();\r\n    $('footer').hide();\r\n    defaultDisplayData();\r\n    watchSubmit();\r\n  });\r\n});\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app.js\n// module id = 0\n// module chunks = 0"],"sourceRoot":""}